<!DOCTYPE html5>
<html>
	<head>
		<title>SEIZURES SEIZURES SEIZURES SEIZURES SEIZURES SEIZURES SEIZURES SEIZURES SEIZURES SEIZURES SEIZURES  </title>
		<script>

window.onresize = function() {
    var canvas = document.getElementById('the-thing');
    canvas.width = document.body.clientWidth;
    canvas.height = document.body.clientWidth;
};

window.onload = function() {
    var elapsedTime = [[1000/10, 1000/20], [1000/30, 1000/10]];
    if (window.location.hash) {
        var maybeRate = parseInt(window.location.hash.slice(1));
        if (!isNaN(maybeRate)) {
            elapsedTime[0][0] = 500/maybeRate;
        }
    }
	console.log('loaded!');
    var canvas = document.getElementById('the-thing');
    canvas.width = document.body.clientWidth;
    canvas.height = document.body.clientWidth;

    if (canvas.requestFullscreen) {
        canvas.requestFullscreen();
    }

    var ctx = canvas.getContext('2d');

	var isWhite = [[false, false], [false, false]];
    var ts = [[null, null], [null, null]];
	var magic = function(timestamp) {
        for (var i = 0; i < isWhite.length; i++) {
            for (var j = 0; j < isWhite[i].length; j++) {
                if (ts[i][j] == null || ((timestamp - ts[i][j]) > elapsedTime[i][j])) {
                    if (isWhite[i][j]) {
                        ctx.fillStyle = 'rgb(0,0,0)';
                        ctx.fillRect(i*canvas.width/2, j*canvas.height/2, 
                                canvas.width/2, canvas.height/2);
                        isWhite[i][j] = false;
                    } else {
                        ctx.fillStyle = 'rgb(255,255,255)';
                        ctx.fillRect(i*canvas.width/2, j*canvas.height/2, 
                                canvas.width/2, canvas.height/2);
                        isWhite[i][j] = true;
                    }
                    ts[i][j] = timestamp;
                }
            }
        }
		window.requestAnimationFrame(magic);
	};
    window.requestAnimationFrame(magic);
};
</script>
	</head>
	<body>
        <canvas id="the-thing"></canvas>
	</body>
</html>
